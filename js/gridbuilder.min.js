/*
 MIT
*/
(function(m){"function"===typeof define&&define.amd?define(m):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=m():"undefined"!==typeof Package?Sortable=m():window.Sortable=m()})(function(){function m(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a;this.options=b=S({},b);a[D]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,
draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1},d;for(d in c)d in b||(b[d]=c[d]);T(b);for(var e in this)"_"===e.charAt(0)&&(this[e]=this[e].bind(this));this.nativeDraggable=b.forceFallback?!1:ca;g(a,"mousedown",this._onTapStart);
g(a,"touchstart",this._onTapStart);this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));H.push(this._onDragOver);b.store&&this.sort(b.store.get(this))}function N(a){t&&t.state!==a&&(h(t,"display",a?"none":""),!a&&t.state&&f.insertBefore(t,e),t.state=a)}function x(a,b,c){if(a){c=c||n;do if(">*"===b&&a.parentNode===c||U(a,b))return a;while(a!==c&&(a=a.parentNode))}return null}function g(a,b,c){a.addEventListener(b,c,!1)}function p(a,b,c){a.removeEventListener(b,c,!1)}function E(a,b,c){if(a)if(a.classList)a.classList[c?
"add":"remove"](b);else{var d=(" "+a.className+" ").replace(V," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(V," ")}}function h(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return n.defaultView&&n.defaultView.getComputedStyle?c=n.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b);d[b]=c+("string"===typeof c?"":"px")}}function W(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var d=a.length;if(c)for(;b<d;b++)c(a[b],b);return a}return[]}
function w(a,b,c,d,e,A,k){var y=n.createEvent("Event"),h=(a||b[D]).options,l="on"+c.charAt(0).toUpperCase()+c.substr(1);y.initEvent(c,!0,!0);y.to=b;y.from=e||b;y.item=d||b;y.clone=t;y.oldIndex=A;y.newIndex=k;b.dispatchEvent(y);h[l]&&h[l].call(a,y)}function X(a,b,c,d,e,A){var k,h=a[D],l=h.options.onMove,f;k=n.createEvent("Event");k.initEvent("move",!0,!0);k.to=b;k.from=a;k.dragged=c;k.draggedRect=d;k.related=e||b;k.relatedRect=A||b.getBoundingClientRect();a.dispatchEvent(k);l&&(f=l.call(h,k));return f}
function Y(a){a.draggable=!1}function da(){O=!1}function ea(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function J(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&U(a,b)&&c++;return c}function U(a,b){if(a){b=b.split(".");var c=b.shift().toUpperCase(),d=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");return(""===c||a.nodeName.toUpperCase()==c)&&(!b.length||
((" "+a.className+" ").match(d)||[]).length==b.length)}return!1}function Z(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c);c=void 0},b))}}function S(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}if("undefined"==typeof window||"undefined"==typeof window.document)return function(){throw Error("Sortable.js requires a window with a document");};var e,F,l,t,f,I,q,P,Q,K,R,u,r,B,z={},C,v,L,V=/\s+/g,D="Sortable"+
(new Date).getTime(),G=window,n=G.document,aa=G.parseInt,ca=!!("draggable"in n.createElement("div")),ba=function(a){a=n.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),O=!1,M=Math.abs,H=[],fa=Z(function(a,b,c){if(c&&b.scroll){var d,e=b.scrollSensitivity,A=b.scrollSpeed,k=a.clientX;a=a.clientY;var h=window.innerWidth,l=window.innerHeight,f,g;if(P!==c&&(q=b.scroll,P=c,!0===q)){q=c;do if(q.offsetWidth<q.scrollWidth||q.offsetHeight<q.scrollHeight)break;
while(q=q.parentNode)}q&&(d=q,b=q.getBoundingClientRect(),f=(M(b.right-k)<=e)-(M(b.left-k)<=e),g=(M(b.bottom-a)<=e)-(M(b.top-a)<=e));f||g||(f=(h-k<=e)-(k<=e),g=(l-a<=e)-(a<=e),(f||g)&&(d=G));if(z.vx!==f||z.vy!==g||z.el!==d)z.el=d,z.vx=f,z.vy=g,clearInterval(z.pid),d&&(z.pid=setInterval(function(){d===G?G.scrollTo(G.pageXOffset+f*A,G.pageYOffset+g*A):(g&&(d.scrollTop+=g*A),f&&(d.scrollLeft+=f*A))},24))}},30),T=function(a){var b=a.group;b&&"object"==typeof b||(b=a.group={name:b});["pull","put"].forEach(function(a){a in
b||(b[a]=!0)});a.groups=" "+b.name+(b.put.join?" "+b.put.join(" "):"")+" "};m.prototype={constructor:m,_onTapStart:function(a){var b=this,c=this.el,d=this.options,e=a.touches&&a.touches[0],f=(e||a).target,k=f,h=d.filter;if(!("mousedown"===a.type&&0!==a.button||d.disabled)&&(f=x(f,d.draggable,c))){u=J(f,d.draggable);if("function"===typeof h){if(h.call(this,a,f,this)){w(b,k,"filter",f,c,u);a.preventDefault();return}}else if(h&&(h=h.split(",").some(function(a){if(a=x(k,a.trim(),c))return w(b,a,"filter",
f,c,u),!0}))){a.preventDefault();return}d.handle&&!x(k,d.handle,c)||this._prepareDragStart(a,e,f)}},_prepareDragStart:function(a,b,c){var d=this,h=d.el,l=d.options,k=h.ownerDocument;c&&!e&&c.parentNode===h&&(C=a,f=h,e=c,F=e.parentNode,I=e.nextSibling,B=l.group,a=function(){d._disableDelayedDrag();e.draggable=!0;E(e,d.options.chosenClass,!0);d._triggerDragStart(b)},l.ignore.split(",").forEach(function(a){W(e,a.trim(),Y)}),g(k,"mouseup",d._onDrop),g(k,"touchend",d._onDrop),g(k,"touchcancel",d._onDrop),
l.delay?(g(k,"mouseup",d._disableDelayedDrag),g(k,"touchend",d._disableDelayedDrag),g(k,"touchcancel",d._disableDelayedDrag),g(k,"mousemove",d._disableDelayedDrag),g(k,"touchmove",d._disableDelayedDrag),d._dragStartTimer=setTimeout(a,l.delay)):a())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer);p(a,"mouseup",this._disableDelayedDrag);p(a,"touchend",this._disableDelayedDrag);p(a,"touchcancel",this._disableDelayedDrag);p(a,"mousemove",this._disableDelayedDrag);
p(a,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(a){a?(C={target:e,clientX:a.clientX,clientY:a.clientY},this._onDragStart(C,"touch")):this.nativeDraggable?(g(e,"dragend",this),g(f,"dragstart",this._onDragStart)):this._onDragStart(C,!0);try{n.selection?n.selection.empty():window.getSelection().removeAllRanges()}catch(b){}},_dragStarted:function(){f&&e&&(E(e,this.options.ghostClass,!0),m.active=this,w(this,f,"start",e,f,u))},_emulateDragOver:function(){if(v&&(this._lastX!==v.clientX||
this._lastY!==v.clientY)){this._lastX=v.clientX;this._lastY=v.clientY;ba||h(l,"display","none");var a=n.elementFromPoint(v.clientX,v.clientY),b=a,c=" "+this.options.group.name+"",d=H.length;if(b){do{if(b[D]&&-1<b[D].options.groups.indexOf(c)){for(;d--;)H[d]({clientX:v.clientX,clientY:v.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode)}ba||h(l,"display","")}},_onTouchMove:function(a){if(C){m.active||this._dragStarted();this._appendGhost();var b=a.touches?a.touches[0]:a,c=b.clientX-C.clientX,
d=b.clientY-C.clientY,c=a.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";L=!0;v=b;h(l,"webkitTransform",c);h(l,"mozTransform",c);h(l,"msTransform",c);h(l,"transform",c);a.preventDefault()}},_appendGhost:function(){if(!l){var a=e.getBoundingClientRect(),b=h(e),c=this.options;l=e.cloneNode(!0);E(l,c.ghostClass,!1);E(l,c.fallbackClass,!0);h(l,"top",a.top-aa(b.marginTop,10));h(l,"left",a.left-aa(b.marginLeft,10));h(l,"width",a.width);h(l,"height",a.height);h(l,"opacity","0.8");
h(l,"position","fixed");h(l,"zIndex","100000");h(l,"pointerEvents","none");c.fallbackOnBody&&n.body.appendChild(l)||f.appendChild(l);b=l.getBoundingClientRect();h(l,"width",2*a.width-b.width);h(l,"height",2*a.height-b.height)}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;this._offUpEvents();"clone"==B.pull&&(t=e.cloneNode(!0),h(t,"display","none"),f.insertBefore(t,e));b?("touch"===b?(g(n,"touchmove",this._onTouchMove),g(n,"touchend",this._onDrop),g(n,"touchcancel",this._onDrop)):
(g(n,"mousemove",this._onTouchMove),g(n,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,e)),g(n,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var b=this.el,c,d,g;d=this.options;c=d.group;var n=c.put,k=B===c,p=d.sort;void 0!==a.preventDefault&&(a.preventDefault(),!d.dragoverBubble&&a.stopPropagation());L=!0;if(B&&!d.disabled&&(k?p||(g=!f.contains(e)):B.pull&&n&&(B.name===c.name||n.indexOf&&
~n.indexOf(B.name)))&&(void 0===a.rootEl||a.rootEl===this.el)&&(fa(a,d,this.el),!O))if(c=x(a.target,d.draggable,b),d=e.getBoundingClientRect(),g)N(!0),t||I?f.insertBefore(e,t||I):p||f.appendChild(e);else if(!(g=0===b.children.length||b.children[0]===l)&&(g=b===a.target)&&(c=b.lastElementChild,g=c.getBoundingClientRect(),g=c=(5<a.clientY-(g.top+g.height)||5<a.clientX-(g.right+g.width))&&c),g){if(c){if(c.animated)return;m=c.getBoundingClientRect()}N(k);!1!==X(f,b,e,d,c,m)&&(e.contains(b)||(b.appendChild(e),
F=b),this._animate(d,e),c&&this._animate(m,c))}else if(c&&!c.animated&&c!==e&&void 0!==c.parentNode[D]){Q!==c&&(Q=c,K=h(c),R=h(c.parentNode));var m=c.getBoundingClientRect(),r=m.right-m.left,q=m.bottom-m.top,p=/left|right|inline/.test(K.cssFloat+K.display)||"flex"==R.display&&0===R["flex-direction"].indexOf("row");g=c.offsetWidth>e.offsetWidth;n=c.offsetHeight>e.offsetHeight;r=.5<(p?(a.clientX-m.left)/r:(a.clientY-m.top)/q);a=c.nextElementSibling;q=X(f,b,e,d,c,m);!1!==q&&(O=!0,setTimeout(da,30),N(k),
1===q||-1===q?k=1===q:p?(k=e.offsetTop,p=c.offsetTop,k=k===p?c.previousElementSibling===e&&!g||r&&g:p>k):k=a!==e&&!n||r&&n,e.contains(b)||(k&&!a?b.appendChild(e):c.parentNode.insertBefore(e,k?a:c)),F=e.parentNode,this._animate(d,e),this._animate(m,c))}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();h(b,"transition","none");h(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)");b.offsetWidth;h(b,"transition","all "+c+"ms");h(b,"transform",
"translate3d(0,0,0)");clearTimeout(b.animated);b.animated=setTimeout(function(){h(b,"transition","");h(b,"transform","");b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;p(n,"touchmove",this._onTouchMove);p(a,"mouseup",this._onDrop);p(a,"touchend",this._onDrop);p(a,"touchcancel",this._onDrop)},_onDrop:function(a){var b=this.el,c=this.options;clearInterval(this._loopId);clearInterval(z.pid);clearTimeout(this._dragStartTimer);p(n,"mousemove",this._onTouchMove);this.nativeDraggable&&
(p(n,"drop",this),p(b,"dragstart",this._onDragStart));this._offUpEvents();if(a&&(L&&(a.preventDefault(),!c.dropBubble&&a.stopPropagation()),l&&l.parentNode.removeChild(l),e&&(this.nativeDraggable&&p(e,"dragend",this),Y(e),E(e,this.options.ghostClass,!1),E(e,this.options.chosenClass,!1),f!==F?(r=J(e,c.draggable),0<=r&&(w(null,F,"sort",e,f,u,r),w(this,f,"sort",e,f,u,r),w(null,F,"add",e,f,u,r),w(this,f,"remove",e,f,u,r))):(t&&t.parentNode.removeChild(t),e.nextSibling!==I&&(r=J(e,c.draggable),0<=r&&(w(this,
f,"update",e,f,u,r),w(this,f,"sort",e,f,u,r)))),m.active))){if(null===r||-1===r)r=u;w(this,f,"end",e,f,u,r);this.save()}this._nulling()},_nulling:function(){f=e=F=l=I=t=q=P=C=v=L=r=Q=K=B=m.active=null},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?e&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()):"drop"!==b&&"dragend"!==b||this._onDrop(a)},toArray:function(){for(var a=[],b,c=this.el.children,d=0,e=c.length,f=this.options;d<e;d++)b=
c[d],x(b,f.draggable,this.el)&&a.push(b.getAttribute(f.dataIdAttr)||ea(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){var f=c.children[e];x(f,this.options.draggable,c)&&(b[a]=f)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return x(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];c[a]=b;"group"===
a&&T(c)},destroy:function(){var a=this.el;a[D]=null;p(a,"mousedown",this._onTapStart);p(a,"touchstart",this._onTapStart);this.nativeDraggable&&(p(a,"dragover",this),p(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});H.splice(H.indexOf(this._onDragOver),1);this._onDrop();this.el=a=null}};m.utils={on:g,off:p,css:h,find:W,is:function(a,b){return!!x(a,b,a)},extend:S,throttle:Z,closest:x,toggleClass:E,index:J};m.create=function(a,
b){return new m(a,b)};m.version="1.4.2";return m});
/*
 MIT
*/
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){c.fn.sortable=function(b){var d,f=arguments;this.each(function(){var e=c(this),a=e.data("sortable");a||!(b instanceof Object)&&b||(a=new Sortable(this,b),e.data("sortable",a));if(a){if("widget"===b)return a;"destroy"===b?(a.destroy(),e.removeData("sortable")):"function"===typeof a[b]?d=a[b].apply(a,[].slice.call(f,1)):b in a.options&&(d=a.option.apply(a,f))}});return void 0===d?this:d}});
(function(d,b){String.prototype.removeAccents=function(){var a={A:/[A\u24b6\uff21\u00c0\u00c1\u00c2\u1ea6\u1ea4\u1eaa\u1ea8\u00c3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\u00c4\u01de\u1ea2\u00c5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104]/g,AA:/[\ua732]/g,AE:/[\u00c6\u01fc\u01e2]/g,AO:/[\ua734]/g,AU:/[\ua736]/g,AV:/[\ua738\ua73a]/g,AY:/[\ua73c]/g,B:/[B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181]/g,C:/[C\u24b8\uff23\u0106\u0108\u010a\u010c\u00c7\u1e08\u0187\u023b\ua73e]/g,D:/[D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779]/g,
DZ:/[\u01f1\u01c4]/g,Dz:/[\u01f2\u01c5]/g,E:/[E\u24ba\uff25\u00c8\u00c9\u00ca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\u00cb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e]/g,F:/[F\u24bb\uff26\u1e1e\u0191\ua77b]/g,G:/[G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e]/g,H:/[H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d]/g,I:/[I\u24be\uff29\u00cc\u00cd\u00ce\u0128\u012a\u012c\u0130\u00cf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197]/g,
J:/[J\u24bf\uff2a\u0134\u0248]/g,K:/[K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2]/g,L:/[L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780]/g,LJ:/[\u01c7]/g,Lj:/[\u01c8]/g,M:/[M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c]/g,N:/[N\u24c3\uff2e\u01f8\u0143\u00d1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4]/g,NJ:/[\u01ca]/g,Nj:/[\u01cb]/g,O:/[O\u24c4\uff2f\u00d2\u00d3\u00d4\u1ed2\u1ed0\u1ed6\u1ed4\u00d5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\u00d6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\u00d8\u01fe\u0186\u019f\ua74a\ua74c]/g,
OI:/[\u01a2]/g,OO:/[\ua74e]/g,OU:/[\u0222]/g,P:/[P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754]/g,Q:/[Q\u24c6\uff31\ua756\ua758\u024a]/g,R:/[R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782]/g,S:/[S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784]/g,T:/[T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786]/g,TZ:/[\ua728]/g,U:/[U\u24ca\uff35\u00d9\u00da\u00db\u0168\u1e78\u016a\u1e7a\u016c\u00dc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244]/g,
V:/[V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245]/g,VY:/[\ua760]/g,W:/[W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72]/g,X:/[X\u24cd\uff38\u1e8a\u1e8c]/g,Y:/[Y\u24ce\uff39\u1ef2\u00dd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe]/g,Z:/[Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762]/g,a:/[a\u24d0\uff41\u1e9a\u00e0\u00e1\u00e2\u1ea7\u1ea5\u1eab\u1ea9\u00e3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\u00e4\u01df\u1ea3\u00e5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250]/g,
aa:/[\ua733]/g,ae:/[\u00e6\u01fd\u01e3]/g,ao:/[\ua735]/g,au:/[\ua737]/g,av:/[\ua739\ua73b]/g,ay:/[\ua73d]/g,b:/[b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253]/g,c:/[c\u24d2\uff43\u0107\u0109\u010b\u010d\u00e7\u1e09\u0188\u023c\ua73f\u2184]/g,d:/[d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a]/g,dz:/[\u01f3\u01c6]/g,e:/[e\u24d4\uff45\u00e8\u00e9\u00ea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\u00eb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd]/g,
f:/[f\u24d5\uff46\u1e1f\u0192\ua77c]/g,g:/[g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f]/g,h:/[h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265]/g,hv:/[\u0195]/g,i:/[i\u24d8\uff49\u00ec\u00ed\u00ee\u0129\u012b\u012d\u00ef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131]/g,j:/[j\u24d9\uff4a\u0135\u01f0\u0249]/g,k:/[k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3]/g,l:/[l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747]/g,
lj:/[\u01c9]/g,m:/[m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f]/g,n:/[n\u24dd\uff4e\u01f9\u0144\u00f1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5]/g,nj:/[\u01cc]/g,o:/[o\u24de\uff4f\u00f2\u00f3\u00f4\u1ed3\u1ed1\u1ed7\u1ed5\u00f5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\u00f6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\u00f8\u01ff\u0254\ua74b\ua74d\u0275]/g,oi:/[\u01a3]/g,ou:/[\u0223]/g,oo:/[\ua74f]/g,p:/[p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755]/g,
q:/[q\u24e0\uff51\u024b\ua757\ua759]/g,r:/[r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783]/g,s:/[s\u24e2\uff53\u00df\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b]/g,t:/[t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787]/g,tz:/[\ua729]/g,u:/[u\u24e4\uff55\u00f9\u00fa\u00fb\u0169\u1e79\u016b\u1e7b\u016d\u00fc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289]/g,
v:/[v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c]/g,vy:/[\ua761]/g,w:/[w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73]/g,x:/[x\u24e7\uff58\u1e8b\u1e8d]/g,y:/[y\u24e8\uff59\u1ef3\u00fd\u0177\u1ef9\u0233\u1e8f\u00ff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff]/g,z:/[z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763]/g},b=this,c;for(c in a)b=b.replace(a[c],c);return b};var f=b.grid={};b.grid.model={};b.grid.view={ui:{},element:{}};b.grid.controller={};b.grid.templates=
{};b.grid.utils={sanitizeTitle:function(a){a=a.removeAccents().toLowerCase();a=a.replace(/[^a-z0-9]/g,"-");a=a.replace(/-+/g,"-");return a=a.replace(/-+$/g,"")}};b.grid.controller.Grid=function(){this.$input=d('[name="_grid_data"]');var a=this,e=this.$input.attr("value");data=JSON.parse(e);this.model=new f.model.GridObject(data);this.subviews=new Backbone.Collection([]);this.selected=!1;this.listenTo(this.model,"change",this.onChangeModel);this.view=new b.grid.view.ui.Editor({controller:this,model:this.model});
this.view.setActiveEditor();this.view.$el.insertAfter("#wp-content-wrap");this.view.render();this.view.$el.focus();d(document).on("click",'[type="submit"]',function(b){a.onChangeModel()})};_.extend(b.grid.controller.Grid.prototype,{whichView:function(){return this.view.whichView()},getSelected:function(a){return this.selected},setSelected:function(a){this.selected=a;return this},onChangeModel:function(){var a=JSON.stringify(this.model.toJSON());this.$input.val(a)}},Backbone.Events);_.extend(b.grid.controller.Grid,
Backbone.Events)})(jQuery,window);
(function(e,c){var f,g,d=gridbuilder.options,h=0;f=c.model.GridObject=Backbone.Model.extend({parent:!1,locks:{},initialize:function(a){_.defaults(a,{items:[]});var b=this;this.items=new g([]);this.items.parent=this;this.parent=!1;this.id="obj"+h++;_.each(a.items,function(a,c){b.items.add(a)});delete a.items;Backbone.Model.prototype.initialize.apply(this,arguments)},setItemParent:function(a){a.parent=this},toJSON:function(a){var b=Backbone.Model.prototype.toJSON.apply(this,arguments);b.items=this.items.toJSON(a);
return b}});g=c.model.GridCollection=Backbone.Collection.extend({model:f,comparator:function(a){return a.get("idx")},add:function(){var a=Backbone.Collection.prototype.add.apply(this,arguments),b=this;modelsArr=a.constructor==Array?a:[a];_.each(modelsArr,function(a,c){a.parent=b.parent});return a}});GridTemplate=c.model.GridTemplate=Backbone.Model.extend({save:function(){var a=this;e.ajax({method:"post",url:d.ajaxurl,complete:function(a,c){},success:function(b,c,d){_.each(b,function(b,c){a.set(c,
b)});a.trigger("sync")},data:{action:this.isNew()?"gridbuilder-create-template":"gridbuilder-update-template",nonce:this.isNew()?d.create_template_nonce:d.update_template_nonce,template:JSON.stringify(this.toJSON())}})},destroy:function(){var a=this;e.ajax({method:"post",url:d.ajaxurl,complete:function(a,c){},success:function(b,c,d){a.trigger("destroy",a,a.collection)},data:{action:"gridbuilder-delete-template",nonce:d.delete_template_nonce,template:JSON.stringify(this.toJSON())}})}});_.extend(c.templates,
{get:function(a,b){a=a.toLowerCase();return c.templates[a]._byId[b]}});_.each(d.templates,function(a,b){c.templates[b]=new Backbone.Collection;_.each(a,function(a,d){var e=new c.model.GridTemplate({name:a.name,slug:a.slug,data:a.data,type:b});e.set("id",a.slug);c.templates[b].add(e)})})})(jQuery,window.grid);
(function(d,c){function q(){f.inited||(_.each(r,function(a){f[a]=wp.media.View.extend(_.extend({template:wp.template("grid-ui-input-"+a)},t))}),f.inited=!0);return f}var k,l,n,p,m=gridbuilder.options,h=gridbuilder.options.features,g=gridbuilder.l10n,r="text textarea color number media select checkbox radio range".split(" "),f={inited:!1},t={render:function(){wp.media.View.prototype.render.apply(this,arguments);var a=this;this.$el.addClass("input-"+this.options.settings.name);this.setValue(this.options.value||
this.options.settings["default"]);switch(this.options.settings.type){case "number":_.each(["min","max","step"],function(b){"undefined"!==typeof a.options.settings[b]&&a.$('[type="number"]').attr(b,a.options.settings[b])});break;case "color":this.$("input.color-picker").wpColorPicker({hide:!0,palettes:a.options.settings.palettes});break;case "media":var b=null;this.$(".select-media").on("click",function(){null===b&&(b=wp.media({title:a.options.settings.title,library:{type:a.options.settings.mimetype},
button:{text:g.Done,close:!0}}),b.on("select",function(){var e=b.state().get("selection").first().attributes;a.setValue(e.id)}));b.open()});break;case "range":this.$("input").on("change",function(){a.updateValue()})}this.updateValue();return this},updateValue:function(){this.$(".display-value").text(this.getValue())},setValue:function(a){switch(this.options.settings.type){case "select":this.$("select").val(a);break;case "radio":null===a?this.$('[type="radio"]:checked').prop("checked",!1):this.$('[type="radio"][value="'+
a+'"]').prop("checked",!0);break;case "checkbox":this.$('[type="checkbox"]').prop("checked",!!a);break;case "color":this.$("input.color-picker").val(a);break;case "media":this.$(".thumbnail").html("");if(a){this.$('[name="media_id"]').val(a);var b=new wp.media.model.Attachment({id:a}),e=this;b.once("change",function(){var a,c;if(b.get("sizes"))try{c=b.get("sizes").thumbnail.url}catch(f){c=b.get("sizes").full.url}else c=b.get("icon");a=new wp.media.View({tagName:"span",className:"filename"});a.$el.text(b.get("title"));
e.$(".thumbnail").append(d("<img />").attr("src",c),(new wp.media.view.Button({text:g.RemoveMedia,click:function(){e.setValue(null)}})).$el.addClass("dashicons dashicons-dismiss"),a.$el);delete b});b.fetch()}else this.$('[name="media_id"]').removeAttr("value");break;case "textarea":this.$("textarea").val(a);break;default:this.$("input").val(a)}},getValue:function(){switch(this.options.settings.type){case "select":return this.$("select").val();case "radio":return this.$('[type="radio"]:checked').val();
case "checkbox":return this.$('[type="checkbox"]').prop("checked");case "color":return this.$("input.color-picker").val();case "textarea":return this.$("textarea").val();default:return this.$("input").val()}},dismiss:function(){}};f.widget_instance=wp.media.View.extend({tagName:"form",className:"widget-instance",initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments);this.$el.append('<span class="spinner" style="visibility:visible;float:none"></span>');this.$widget=null;var a=
this;d.ajax({method:"post",url:m.ajaxurl,complete:function(a,e){},success:function(b,e,c){a.$widget=d(b);a.$el.html("").append(a.$widget);d(document).trigger("widget-added",[a.$widget])},data:{action:"gridbuilder-get-widget",nonce:m.get_widget_nonce,widget_class:this.options.model.get("widget_class"),instance:JSON.stringify(this.options.model.get("instance"))}});return this},hasMCE:function(){return 0<this.getMCE().length},getMCE:function(){return this.$('[id^="wp-"][id$="-editor-container"] textarea')},
getValue:function(){var a={};_.each(this.$el.serializeArray(),function(b){var e=b.name.match(/\[([a-z0-9-_]+)\]$/g)[0].replace(/[\[\]]+/g,"");a[e]=b.value});return a},setValue:function(a){return this},dismiss:function(){d(document).trigger({type:"widget-removed",target:this.$widget});var a=this.getMCE();a.length&&d(document).trigger({type:"deactivate-tinymce",target:a});return this}});p=Backbone.View.extend({tagName:"input",attributes:{type:"text"},events:{'blur [type="text"]':"update"},initialize:function(a){this.property=
a.property;this.model=a.model;return this},render:function(){var a=this;Backbone.View.prototype.render.apply(this,arguments);this.$el.on("change",function(){a.update()});return this},update:function(){this.model.set(this.property,this.$el.val());this.model.save()}});n=wp.media.View.extend({template:wp.template("grid-ui-templates-list"),className:"templates-list",render:function(){wp.media.View.prototype.render.apply(this,arguments);var a=this;this.options.templates.each(function(b,e){var c=new Backbone.View({tagName:"li"}),
u=new wp.media.view.Button({model:b,text:"",classes:["delete","dashicons","dashicons-dismiss"],click:function(){this.options.model.destroy();return!1}}),d=new p({tagName:"input",property:"name",model:b,attributes:{value:b.get("name"),type:"text"}});c.render().$el.append(d.render().$el,u.render().$el);a.$(".templates").append(c.$el);c.listenTo(b,"destroy",function(){this.$el.remove()});d.listenTo(d,"keyup",function(){})});return this}});k=wp.media.View.extend({template:wp.template("grid-ui-input-wrap"),
className:"input-wrap",initialize:function(a){var b=q();_.extend(a,{lock:h.locks});wp.media.View.prototype.initialize.apply(this,arguments);"html"==a.settings.type?(this.$el=d(a.settings.html),this.input={getValue:function(){},setValue:function(){},render:function(){},dismiss:function(){}}):b[a.settings.type]?this.input=new b[a.settings.type](a):console.log("no such type",a.settings.type)},render:function(){wp.media.View.prototype.render.apply(this,arguments);this.input.render();this.$(".input").append(this.input.$el);
this.$el.addClass("input-type-"+this.options.settings.type);this.setLock(this.options.locked);return this},getLock:function(){return this.$('.lock [type="checkbox"]').prop("checked")},setLock:function(a){this.$('.lock [type="checkbox"]').prop("checked",a)},getValue:function(){return this.input.getValue()},setValue:function(a){this.input.setValue(a);return this},dismiss:function(){this.input.dismiss();return this}});l=wp.media.View.extend({template:wp.template("grid-ui-input-group"),className:"input-group",
initialize:function(a){wp.media.View.prototype.initialize.apply(this,arguments);var b=this;this.model=a.model;this.inputs=[];_.each(a.settings.items,function(a,c){_.extend(a,{name:c,lock:h.locks});if(h.locks||!b.model.get(c+":locked")){var d=b.model.get(c),d=new k({controller:b.controller,settings:a,value:d?d:null,locked:!!b.model.get(c+":locked"),model:b.model});b.inputs.push(d)}})},render:function(){wp.media.View.prototype.render.apply(this,arguments);var a=this;_.each(this.inputs,function(b){b.render();
a.$(".inputs").append(b.$el)});return this},dismiss:function(){_.each(this.inputs,function(a){a.dismiss()});return this}});EditDialog=c.view.EditDialog=c.view.ui.Dialog.extend({template:wp.template("grid-ui-edit-dialog"),className:"edit-dialog sidebar",events:{"click .apply":"done"},initialize:function(a){var b=this;c.view.ui.Dialog.prototype.initialize.apply(this,arguments);this.inputgroups=[];this.editor=new l({controller:this,model:this.model,settings:{title:"",items:a.editor}});_.each(a.settings,
function(a,c){_.extend(a,{name:c});var d=new l({controller:b,model:b.model,settings:a});b.inputgroups.push(d)});return this},render:function(){c.view.ui.Dialog.prototype.render.apply(this,arguments);var a=this;_.each(this.inputgroups,function(b){b.render();a.$(".grid-dialog-sidebar").append(b.$el)});this.$(".grid-dialog-content").append(this.editor.render().$el);return this},applyChanges:function(){function a(a){var c=a.options.settings.name;b.model.set(c,a.getValue());h.locks&&b.model.set(c+":locked",
a.getLock())}var b=this;_.each(this.editor.inputs,a);_.each(this.inputgroups,function(b){_.each(b.inputs,a)});return this},done:function(){this.applyChanges();this.trigger("done");return!1},dismiss:function(){this.editor.dismiss();_.each(this.inputgroups,function(a){a.dismiss()});c.view.ui.Dialog.prototype.dismiss.apply(this,arguments);return this}});ManageTemplatesDialog=c.view.ManageTemplatesDialog=c.view.ui.Dialog.extend({template:wp.template("grid-ui-dialog"),className:"manage-templates-dialog",
events:{"click .apply":"done"},initialize:function(){c.view.ui.Dialog.prototype.initialize.apply(this,arguments);var a=this;this.templateLists={};_.each(["Container","Row","Cell","Widget"],function(b){a.templateLists[b.toLowerCase()]=new n({title:g[b]+" "+g.Templates,templates:c.templates[b.toLowerCase()]})})},render:function(){c.view.ui.Dialog.prototype.render.apply(this,arguments);var a=this;_.each(this.templateLists,function(b){a.$(".grid-dialog-content").append(b.render().$el)});return this},
done:function(a){this.trigger("done");return!1}});SelectWidgetDialog=c.view.SelectWidgetDialog=c.view.ui.Dialog.extend({template:wp.template("grid-ui-dialog"),className:"select-widget-dialog",events:{'change [name="widget_class"]':"done"},initialize:function(){c.view.ui.Dialog.prototype.initialize.apply(this,arguments);this.selectWidget=new k({model:this.model,settings:{type:"radio",name:"widget_class",title:g.WidgetTypes,options:m.widgets}})},render:function(){c.view.Dialog.prototype.render.apply(this,
arguments);this.$(".grid-dialog-content").append(this.selectWidget.render().$el);return this},done:function(){this.model.set("widget_class",this.selectWidget.getValue());this.selectWidget.setValue(null);this.trigger("done");return!1}})})(jQuery,window.grid);
(function(d,c){function q(){f.inited||(_.each(r,function(a){f[a]=wp.media.View.extend(_.extend({template:wp.template("grid-ui-input-"+a)},t))}),f.inited=!0);return f}var k,l,n,p,m=gridbuilder.options,h=gridbuilder.options.features,g=gridbuilder.l10n,r="text textarea color number media select checkbox radio range".split(" "),f={inited:!1},t={render:function(){wp.media.View.prototype.render.apply(this,arguments);var a=this;this.$el.addClass("input-"+this.options.settings.name);this.setValue(this.options.value||
this.options.settings["default"]);switch(this.options.settings.type){case "number":_.each(["min","max","step"],function(b){"undefined"!==typeof a.options.settings[b]&&a.$('[type="number"]').attr(b,a.options.settings[b])});break;case "color":this.$("input.color-picker").wpColorPicker({hide:!0,palettes:a.options.settings.palettes});break;case "media":var b=null;this.$(".select-media").on("click",function(){null===b&&(b=wp.media({title:a.options.settings.title,library:{type:a.options.settings.mimetype},
button:{text:g.Done,close:!0}}),b.on("select",function(){var e=b.state().get("selection").first().attributes;a.setValue(e.id)}));b.open()});break;case "range":this.$("input").on("change",function(){a.updateValue()})}this.updateValue();return this},updateValue:function(){this.$(".display-value").text(this.getValue())},setValue:function(a){switch(this.options.settings.type){case "select":this.$("select").val(a);break;case "radio":null===a?this.$('[type="radio"]:checked').prop("checked",!1):this.$('[type="radio"][value="'+
a+'"]').prop("checked",!0);break;case "checkbox":this.$('[type="checkbox"]').prop("checked",!!a);break;case "color":this.$("input.color-picker").val(a);break;case "media":this.$(".thumbnail").html("");if(a){this.$('[name="media_id"]').val(a);var b=new wp.media.model.Attachment({id:a}),e=this;b.once("change",function(){var a,c;if(b.get("sizes"))try{c=b.get("sizes").thumbnail.url}catch(f){c=b.get("sizes").full.url}else c=b.get("icon");a=new wp.media.View({tagName:"span",className:"filename"});a.$el.text(b.get("title"));
e.$(".thumbnail").append(d("<img />").attr("src",c),(new wp.media.view.Button({text:g.RemoveMedia,click:function(){e.setValue(null)}})).$el.addClass("dashicons dashicons-dismiss"),a.$el);delete b});b.fetch()}else this.$('[name="media_id"]').removeAttr("value");break;case "textarea":this.$("textarea").val(a);break;default:this.$("input").val(a)}},getValue:function(){switch(this.options.settings.type){case "select":return this.$("select").val();case "radio":return this.$('[type="radio"]:checked').val();
case "checkbox":return this.$('[type="checkbox"]').prop("checked");case "color":return this.$("input.color-picker").val();case "textarea":return this.$("textarea").val();default:return this.$("input").val()}},dismiss:function(){}};f.widget_instance=wp.media.View.extend({tagName:"form",className:"widget-instance",initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments);this.$el.append('<span class="spinner" style="visibility:visible;float:none"></span>');this.$widget=null;var a=
this;d.ajax({method:"post",url:m.ajaxurl,complete:function(a,e){},success:function(b,e,c){a.$widget=d(b);a.$el.html("").append(a.$widget);d(document).trigger("widget-added",[a.$widget])},data:{action:"gridbuilder-get-widget",nonce:m.get_widget_nonce,widget_class:this.options.model.get("widget_class"),instance:JSON.stringify(this.options.model.get("instance"))}});return this},hasMCE:function(){return 0<this.getMCE().length},getMCE:function(){return this.$('[id^="wp-"][id$="-editor-container"] textarea')},
getValue:function(){var a={};_.each(this.$el.serializeArray(),function(b){var e=b.name.match(/\[([a-z0-9-_]+)\]$/g)[0].replace(/[\[\]]+/g,"");a[e]=b.value});return a},setValue:function(a){return this},dismiss:function(){d(document).trigger({type:"widget-removed",target:this.$widget});var a=this.getMCE();a.length&&d(document).trigger({type:"deactivate-tinymce",target:a});return this}});p=Backbone.View.extend({tagName:"input",attributes:{type:"text"},events:{'blur [type="text"]':"update"},initialize:function(a){this.property=
a.property;this.model=a.model;return this},render:function(){var a=this;Backbone.View.prototype.render.apply(this,arguments);this.$el.on("change",function(){a.update()});return this},update:function(){this.model.set(this.property,this.$el.val());this.model.save()}});n=wp.media.View.extend({template:wp.template("grid-ui-templates-list"),className:"templates-list",render:function(){wp.media.View.prototype.render.apply(this,arguments);var a=this;this.options.templates.each(function(b,e){var c=new Backbone.View({tagName:"li"}),
u=new wp.media.view.Button({model:b,text:"",classes:["delete","dashicons","dashicons-dismiss"],click:function(){this.options.model.destroy();return!1}}),d=new p({tagName:"input",property:"name",model:b,attributes:{value:b.get("name"),type:"text"}});c.render().$el.append(d.render().$el,u.render().$el);a.$(".templates").append(c.$el);c.listenTo(b,"destroy",function(){this.$el.remove()});d.listenTo(d,"keyup",function(){})});return this}});k=wp.media.View.extend({template:wp.template("grid-ui-input-wrap"),
className:"input-wrap",initialize:function(a){var b=q();_.extend(a,{lock:h.locks});wp.media.View.prototype.initialize.apply(this,arguments);"html"==a.settings.type?(this.$el=d(a.settings.html),this.input={getValue:function(){},setValue:function(){},render:function(){},dismiss:function(){}}):b[a.settings.type]?this.input=new b[a.settings.type](a):console.log("no such type",a.settings.type)},render:function(){wp.media.View.prototype.render.apply(this,arguments);this.input.render();this.$(".input").append(this.input.$el);
this.$el.addClass("input-type-"+this.options.settings.type);this.setLock(this.options.locked);return this},getLock:function(){return this.$('.lock [type="checkbox"]').prop("checked")},setLock:function(a){this.$('.lock [type="checkbox"]').prop("checked",a)},getValue:function(){return this.input.getValue()},setValue:function(a){this.input.setValue(a);return this},dismiss:function(){this.input.dismiss();return this}});l=wp.media.View.extend({template:wp.template("grid-ui-input-group"),className:"input-group",
initialize:function(a){wp.media.View.prototype.initialize.apply(this,arguments);var b=this;this.model=a.model;this.inputs=[];_.each(a.settings.items,function(a,c){_.extend(a,{name:c,lock:h.locks});if(h.locks||!b.model.get(c+":locked")){var d=b.model.get(c),d=new k({controller:b.controller,settings:a,value:d?d:null,locked:!!b.model.get(c+":locked"),model:b.model});b.inputs.push(d)}})},render:function(){wp.media.View.prototype.render.apply(this,arguments);var a=this;_.each(this.inputs,function(b){b.render();
a.$(".inputs").append(b.$el)});return this},dismiss:function(){_.each(this.inputs,function(a){a.dismiss()});return this}});EditDialog=c.view.EditDialog=c.view.ui.Dialog.extend({template:wp.template("grid-ui-edit-dialog"),className:"edit-dialog sidebar",events:{"click .apply":"done"},initialize:function(a){var b=this;c.view.ui.Dialog.prototype.initialize.apply(this,arguments);this.inputgroups=[];this.editor=new l({controller:this,model:this.model,settings:{title:"",items:a.editor}});_.each(a.settings,
function(a,c){_.extend(a,{name:c});var d=new l({controller:b,model:b.model,settings:a});b.inputgroups.push(d)});return this},render:function(){c.view.ui.Dialog.prototype.render.apply(this,arguments);var a=this;_.each(this.inputgroups,function(b){b.render();a.$(".grid-dialog-sidebar").append(b.$el)});this.$(".grid-dialog-content").append(this.editor.render().$el);return this},applyChanges:function(){function a(a){var c=a.options.settings.name;b.model.set(c,a.getValue());h.locks&&b.model.set(c+":locked",
a.getLock())}var b=this;_.each(this.editor.inputs,a);_.each(this.inputgroups,function(b){_.each(b.inputs,a)});return this},done:function(){this.applyChanges();this.trigger("done");return!1},dismiss:function(){this.editor.dismiss();_.each(this.inputgroups,function(a){a.dismiss()});c.view.ui.Dialog.prototype.dismiss.apply(this,arguments);return this}});ManageTemplatesDialog=c.view.ManageTemplatesDialog=c.view.ui.Dialog.extend({template:wp.template("grid-ui-dialog"),className:"manage-templates-dialog",
events:{"click .apply":"done"},initialize:function(){c.view.ui.Dialog.prototype.initialize.apply(this,arguments);var a=this;this.templateLists={};_.each(["Container","Row","Cell","Widget"],function(b){a.templateLists[b.toLowerCase()]=new n({title:g[b]+" "+g.Templates,templates:c.templates[b.toLowerCase()]})})},render:function(){c.view.ui.Dialog.prototype.render.apply(this,arguments);var a=this;_.each(this.templateLists,function(b){a.$(".grid-dialog-content").append(b.render().$el)});return this},
done:function(a){this.trigger("done");return!1}});SelectWidgetDialog=c.view.SelectWidgetDialog=c.view.ui.Dialog.extend({template:wp.template("grid-ui-dialog"),className:"select-widget-dialog",events:{'change [name="widget_class"]':"done"},initialize:function(){c.view.ui.Dialog.prototype.initialize.apply(this,arguments);this.selectWidget=new k({model:this.model,settings:{type:"radio",name:"widget_class",title:g.WidgetTypes,options:m.widgets}})},render:function(){c.view.Dialog.prototype.render.apply(this,
arguments);this.$(".grid-dialog-content").append(this.selectWidget.render().$el);return this},done:function(){this.model.set("widget_class",this.selectWidget.getValue());this.selectWidget.setValue(null);this.trigger("done");return!1}})})(jQuery,window.grid);
(function(a,k){var g=gridbuilder.l10n,l=gridbuilder.options.default_widget,m=gridbuilder.options.default_widget_content_property,d;a(document).ready(function(){var e,f=!!parseInt(a('[name="_grid_enabled"]').val()),n='<input type="hidden" name="_grid_enabled" value="'+(f?1:0).toString()+'" />',p='<button type="button" id="edit-content-grid" class="button-secondary toggle-grid-editor">'+g.EditGrid+"</button>",q='<button type="button" id="edit-content-text" class="button-secondary toggle-grid-editor">'+
g.EditText+"</button>",r=a('[name="_grid_data"]').val(),h=!JSON.parse(r);e=null;d=function(b){b=_.isUndefined(b)?"true"!==a("#postdivrich").attr("date-grid-editor-mode"):b;var c;a("#postdivrich").attr("date-grid-editor-mode",b.toString());a('[name="_grid_enabled"]').val(b?1:0);b||a(window).trigger("resize");b&&h&&(c={widget_class:l,instance:{}},c.instance[m]=a('textarea[name="content"]').val(),c={items:[{items:[{items:[{size_xs:12,items:[c]}]}]}]},a('[name="_grid_data"]').val(JSON.stringify(c)),h=
!1);b&&!e&&(e=new k.controller.Grid)};a("#postdivrich").attr("date-grid-editor-mode",f.toString()).prepend('<div id="grid-toggle-wrap" class="grid-toolbar"><div class="toolbar-right">'+n+p+q+"</div></div>");d(f);"undefined"!==typeof bstw_data&&bstw_data.deactivate_events.push("deactivate-tinymce")}).on("click",".toggle-grid-editor",function(a){d()})})(jQuery,window.grid);
